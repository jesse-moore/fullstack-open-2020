{"version":3,"sources":["services/phonebook.js","components/Filter.js","components/PersonForm.js","components/PersonsList.js","components/Message.js","App.js","index.js"],"names":["baseURL","axios","get","then","data","newEntry","post","id","delete","updatedEntry","put","handleOnChange","newFilter","onChange","name","value","handleOnSubmit","newName","newPhoneNumber","onSubmit","type","persons","personsFilter","handleDelete","filter","map","person","number","key","onClick","appMessage","message","messageStyle","backgroundColor","styles","fontWeight","fontSize","borderRadius","padding","margin","style","App","useState","setPersons","setNewName","setNewPhoneNumber","setNewFilter","setAppMessage","useEffect","phonebookService","catch","handleMessage","target","handleAdd","length","newPerson","p","handleUpdate","window","confirm","updatedPerson","personData","newPersons","setTimeout","Message","Filter","PersonForm","e","preventDefault","PersonsList","toLowerCase","includes","personName","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3de7b412.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseURL = \"/api/persons\";\r\n\r\nconst getPhoneBook = () => {\r\n  const request = axios.get(baseURL);\r\n  return request.then(({ data }) => data);\r\n};\r\n\r\nconst addEntry = (newEntry) => {\r\n  const request = axios.post(baseURL, newEntry);\r\n  return request.then(({ data }) => data);\r\n};\r\n\r\nconst updateEntry = (updatedEntry) => {\r\n  const { id } = updatedEntry;\r\n  const request = axios.put(`${baseURL}/${id}`, updatedEntry);\r\n  return request.then(({ data }) => data);\r\n};\r\n\r\nconst deleteEntry = (id) => {\r\n  const request = axios.delete(`${baseURL}/${id}`);\r\n  return request;\r\n};\r\n\r\nexport default { getPhoneBook, addEntry, deleteEntry, updateEntry };\r\n","import React from \"react\";\r\n\r\nexport default ({ handleOnChange, newFilter }) => {\r\n  return (\r\n    <div>\r\n      filter shown with\r\n      <input onChange={handleOnChange} name=\"filter\" value={newFilter} />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nexport default ({\r\n  handleOnChange,\r\n  handleOnSubmit,\r\n  newName,\r\n  newPhoneNumber,\r\n}) => {\r\n  return (\r\n    <form onSubmit={handleOnSubmit}>\r\n      <div>\r\n        name:\r\n        <input onChange={handleOnChange} name=\"name\" value={newName} />\r\n      </div>\r\n      <div>\r\n        number:\r\n        <input onChange={handleOnChange} name=\"number\" value={newPhoneNumber} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nexport default ({ persons, personsFilter, handleDelete }) => {\r\n  return persons.filter(personsFilter).map((person) => {\r\n    const { name, number, id } = person;\r\n    return (\r\n      <p key={name}>\r\n        <span>{name}</span> <span>{number} </span>\r\n        <button name={id} onClick={handleDelete}>\r\n          delete\r\n        </button>\r\n      </p>\r\n    );\r\n  });\r\n};\r\n","import React from \"react\";\r\n\r\nexport default ({ appMessage }) => {\r\n  const { message = \"\", type = \"\" } = appMessage;\r\n  if (message === \"\") return null;\r\n  const defaultStyle = {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"1.25em\",\r\n    borderRadius: \"5px\",\r\n    padding: \"20px\",\r\n    margin: \"10px\",\r\n    backgroundColor: \"#cce5ff\",\r\n  };\r\n  const alertStyle = {\r\n    backgroundColor: \"#f8d7da\",\r\n  };\r\n  const notifStyle = {\r\n    backgroundColor: \"#d4edda\",\r\n  };\r\n  const messageStyle =\r\n    type === \"alert\" ? alertStyle : type === \"notif\" ? notifStyle : {};\r\n  const styles = { ...defaultStyle, ...messageStyle };\r\n  return (\r\n    <div style={styles}>\r\n      <span>{message}</span>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { phonebookService } from \"./services\";\r\nimport { Filter, Message, PersonForm, PersonsList } from \"./components\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newPhoneNumber, setNewPhoneNumber] = useState(\"\");\r\n  const [newFilter, setNewFilter] = useState(\"\");\r\n  const [appMessage, setAppMessage] = useState({ message: \"\", type: \"\" });\r\n\r\n  useEffect(() => {\r\n    phonebookService\r\n      .getPhoneBook()\r\n      .then((data) => setPersons(data))\r\n      .catch(() => {\r\n        handleMessage(\r\n          `Cannot retrieve phonebook database from server`,\r\n          \"alert\"\r\n        );\r\n      });\r\n  }, []);\r\n\r\n  const checkNameExists = () => {\r\n    return persons.filter((person) => (person.name === newName ? true : false))\r\n      .length > 0\r\n      ? true\r\n      : false;\r\n  };\r\n\r\n  const alertNameExists = () => {\r\n    return window.confirm(\r\n      `${newName} is already added to phonebook, replace the old number with a new one?`\r\n    );\r\n  };\r\n\r\n  const handleOnChange = ({ target }) => {\r\n    const { name, value } = target;\r\n    if (name === \"name\") return setNewName(value);\r\n    if (name === \"number\") return setNewPhoneNumber(value);\r\n    if (name === \"filter\") return setNewFilter(value);\r\n  };\r\n\r\n  const handleOnSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (checkNameExists()) return handleUpdate();\r\n    return handleAdd();\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    const id = persons.length + 1;\r\n    const newPerson = { name: newName, number: newPhoneNumber, id };\r\n    phonebookService\r\n      .addEntry(newPerson)\r\n      .then((p) => {\r\n        setPersons([p, ...persons]);\r\n        setNewName(\"\");\r\n        setNewPhoneNumber(\"\");\r\n        handleMessage(`Added ${p.name}`, \"notif\");\r\n      })\r\n      .catch(() => {\r\n        handleMessage(`Error adding ${newPerson.name}`, \"alert\");\r\n      });\r\n  };\r\n\r\n  const handleUpdate = () => {\r\n    if (!alertNameExists()) return;\r\n    const person = persons.filter((p) => p.name === newName)[0];\r\n    const updatedPerson = { ...person, number: newPhoneNumber };\r\n    phonebookService\r\n      .updateEntry(updatedPerson)\r\n      .then((personData) => {\r\n        const newPersons = persons.map((p) => {\r\n          return p.name === personData.name ? personData : p;\r\n        });\r\n        setPersons(newPersons);\r\n        setNewName(\"\");\r\n        setNewPhoneNumber(\"\");\r\n        handleMessage(`Updated ${person.name}`, \"notif\");\r\n      })\r\n      .catch(() => {\r\n        handleMessage(\r\n          `${person.name} already removed from server and cannot be updated`,\r\n          \"alert\"\r\n        );\r\n      });\r\n  };\r\n\r\n  const handleDelete = ({ target }) => {\r\n    const { name: id } = target;\r\n    const { name: personName } = persons.filter(\r\n      (person) => person.id === id\r\n    )[0];\r\n    const confirmDelete = window.confirm(`Delete ${personName}?`);\r\n    if (!confirmDelete) return;\r\n    phonebookService\r\n      .deleteEntry(id)\r\n      .then(() => {\r\n        const newPersons = persons.filter((p) => p.id !== id);\r\n        setPersons(newPersons);\r\n        handleMessage(`Deleted ${personName}`, \"notif\");\r\n      })\r\n      .catch(() => {\r\n        handleMessage(`Error deleting ${personName}`, \"alert\");\r\n      });\r\n  };\r\n\r\n  const handleMessage = (message, type) => {\r\n    setAppMessage({ message, type });\r\n    setTimeout(() => {\r\n      setAppMessage({});\r\n    }, 5000);\r\n  };\r\n\r\n  const personsFilter = ({ name }) => {\r\n    if (name.toLowerCase().includes(newFilter.toLowerCase())) return true;\r\n    return false;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Message appMessage={appMessage} />\r\n      <Filter handleOnChange={handleOnChange} newFilter={newFilter} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        handleOnChange={handleOnChange}\r\n        handleOnSubmit={handleOnSubmit}\r\n        newName={newName}\r\n        newPhoneNumber={newPhoneNumber}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <PersonsList\r\n        persons={persons}\r\n        personsFilter={personsFilter}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}