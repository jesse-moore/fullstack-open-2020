(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),o=t.n(c),u=(t(23),t(3)),l=t(17),i=t(4),m=t(2),d=t.n(m),f="/api/persons",s=function(){return d.a.get(f).then((function(e){return e.data}))},b=function(e){return d.a.post(f,e).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(f,"/").concat(e))},p=function(e){var n=e.id;return d.a.put("".concat(f,"/").concat(n),e).then((function(e){return e.data}))},v=function(e){var n=e.handleOnChange,t=e.newFilter;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{onChange:n,name:"filter",value:t}))},E=function(e){var n=e.handleOnChange,t=e.handleOnSubmit,a=e.newName,c=e.newPhoneNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name:",r.a.createElement("input",{onChange:n,name:"name",value:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{onChange:n,name:"number",value:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=function(e){var n=e.persons,t=e.personsFilter,a=e.handleDelete;return n.filter(t).map((function(e){var n=e.name,t=e.number,c=e.id;return r.a.createElement("p",{key:n},r.a.createElement("span",null,n)," ",r.a.createElement("span",null,t," "),r.a.createElement("button",{name:c,onClick:a},"delete"))}))},O=function(e){var n=e.appMessage,t=n.message,a=void 0===t?"":t,c=n.type,o=void 0===c?"":c;if(""===a)return null;var l="alert"===o?{backgroundColor:"#f8d7da"}:"notif"===o?{backgroundColor:"#d4edda"}:{},i=Object(u.a)(Object(u.a)({},{fontWeight:"bold",fontSize:"1.25em",borderRadius:"5px",padding:"20px",margin:"10px",backgroundColor:"#cce5ff"}),l);return r.a.createElement("div",{style:i},r.a.createElement("span",null,a))},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),m=Object(i.a)(o,2),d=m[0],f=m[1],w=Object(a.useState)(""),j=Object(i.a)(w,2),C=j[0],k=j[1],S=Object(a.useState)(""),y=Object(i.a)(S,2),D=y[0],N=y[1],x=Object(a.useState)({message:"",type:""}),F=Object(i.a)(x,2),M=F[0],P=F[1];Object(a.useEffect)((function(){s().then((function(e){return c(e)})).catch((function(){A("Cannot retrieve phonebook database from server","alert")}))}),[]);var J=function(e){var n=e.target,t=n.name,a=n.value;return"name"===t?f(a):"number"===t?k(a):"filter"===t?N(a):void 0},L=function(){var e=t.length+1,n={name:d,number:C,id:e};b(n).then((function(e){c([e].concat(Object(l.a)(t))),f(""),k(""),A("Added ".concat(e.name),"notif")})).catch((function(){A("Error adding ".concat(n.name),"alert")}))},z=function(){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){var e=t.filter((function(e){return e.name===d}))[0],n=Object(u.a)(Object(u.a)({},e),{},{number:C});p(n).then((function(n){var a=t.map((function(e){return e.name===n.name?n:e}));c(a),f(""),k(""),A("Updated ".concat(e.name),"notif")})).catch((function(){A("".concat(e.name," already removed from server and cannot be updated"),"alert")}))}},A=function(e,n){P({message:e,type:n}),setTimeout((function(){P({})}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{appMessage:M}),r.a.createElement(v,{handleOnChange:J,newFilter:D}),r.a.createElement("h2",null,"add a new"),r.a.createElement(E,{handleOnChange:J,handleOnSubmit:function(e){return e.preventDefault(),t.filter((function(e){return e.name===d})).length>0?z():L()},newName:d,newPhoneNumber:C}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{persons:t,personsFilter:function(e){return!!e.name.toLowerCase().includes(D.toLowerCase())},handleDelete:function(e){var n=e.target.name,a=t.filter((function(e){return e.id===n}))[0].name;window.confirm("Delete ".concat(a,"?"))&&h(n).then((function(){var e=t.filter((function(e){return e.id!==n}));c(e),A("Deleted ".concat(a),"notif")})).catch((function(){A("Error deleting ".concat(a),"alert")}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.3de7b412.chunk.js.map